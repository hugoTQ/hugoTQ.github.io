# 一、 消息队列的好处
1. 解耦
2. 提速（异步）
3. 广播
4. 削峰

# 二、消息队列的问题
1. 引入复杂度
2. 暂时的不一致性



# 三、使用消息队列该满足的条件
1. 生产者不需要从消费者出获得反馈
2. 容许短暂的不一致性
3. 确实是用了有效果：即解耦、提速、广播、削峰这些方面的收益，超过放置书架、监控书架这些成本。

# 四、主流消息队列中间件
**Kafka、ActiveMQ、RabbitMQ、RocketMQ。**

**ActiveMQ**和**RabbitMQ**这两着因为吞吐量还有GitHub的社区活跃度的原因，在各大互联网公司都已经基本上绝迹了，业务体量一般的公司会是有在用的，但是越来越多的公司更青睐**RocketMQ**这样的消息中间件了。  

**Kafka**和**RocketMQ**一直在各自擅长的领域发光发亮，不过写这篇文章的时候我问了蚂蚁金服，字节跳动和美团的朋友，好像大家用的都有点不一样，应该都是各自的中间件，可能做过修改，也可能是自研的，大多没有开源。就像我们公司就是是基于Kafka和RocketMQ两者的优点自研的消息队列中间件，吞吐量、可靠性、时效性等都很可观。  

**RocketMQ**（阿里开源的），git活跃度还可以。基本上你push了自己的bug确认了有问题都有阿里大佬跟你试试解答并修复的，我个人推荐的也是这个，他的架构设计部分跟同样是阿里开源的一个RPC框架是真的很像（Dubbo）可能是因为师出同门的原因吧。  

**Kafka**我放到最后说，你们也应该知道了，压轴的这是个大哥，大数据领域，公司的日志采集，实时计算等场景，都离不开他的身影，他基本上算得上是世界范围级别的消息队列标杆了。  

# 五、遗留问题
1. body数据类型如何设计，例如数组
2. 如何实现批量推送
3. 订阅了类型、目录等，如何设计消息队列？

# Reference
[知乎：消息队列的使用场景是怎样的？](https://www.zhihu.com/question/34243607)  
[美团：消息队列设计精要](https://tech.meituan.com/2016/07/01/mq-design.html)  
[RocketMQ产品文档](https://help.aliyun.com/product/29530.html?spm=a2c4g.440186.0.0.277029eco9tChl)
