

# 2019-01-22 CTE core问题



## 现象

1、出现大量 core，dsf new，obs upload

## 定位过程

1、地址消毒器定位到obs内部代码，改为path规避

2、地址消毒器定位到dsf踩内存

### 根因

1、obs 缓存直接使用cte传参，属于他们的代码逻辑问题

2、cte的消息队列只支持一读一写，dsf到主控的消息存是多写一读，存在并发问题

## 总结

### 定位手段

1. 高版本地址消毒器（目前还是没有启动成功），加入获取不到堆栈信息用命令：**addr2line -f -e xengine 0xa07109**

### 改进计划

1. 静态检查，codeDEX

2. 用例覆盖

   1. 检视覆盖场景，例如：obs 虚拟地址
   2. 失败用例抄送全员并定期分析

3. 灰度或云龙地址消毒器（常稳）

   